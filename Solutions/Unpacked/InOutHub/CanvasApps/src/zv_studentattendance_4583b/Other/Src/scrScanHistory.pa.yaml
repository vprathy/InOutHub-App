# ************************************************************************************************
# Warning: YAML source code for Canvas Apps should only be used to review changes made within Power Apps Studio and for minor edits (Preview).
# Use the maker portal to create and edit your Power Apps.
# 
# The schema file for Canvas Apps is available at https://go.microsoft.com/fwlink/?linkid=2304907
# 
# For more information, visit https://go.microsoft.com/fwlink/?linkid=2292623
# ************************************************************************************************
Screens:
  scrScanHistory:
    Properties:
      LoadingSpinnerColor: =RGBA(56, 96, 178, 1)
      OnVisible: |+
        =ClearCollect(
            colScanHistory,
            Sort(
                Filter(
                    Student_Scans,
                    Student_QR = varHistoryStudent.cree6_idname
                ),
                'Created On',
                SortOrder.Descending
            )
        );
        Set(varLastRefreshed, Now());
    Children:
      - conHeader_1:
          Control: GroupContainer@1.3.0
          Variant: AutoLayout
          Properties:
            Fill: =RGBA(14, 78, 163, 1)
            Height: =64
            LayoutDirection: =LayoutDirection.Horizontal
            PaddingLeft: =12
            PaddingRight: =12
            Width: =Parent.Width
          Children:
            - icoBack_1:
                Control: Classic/Icon@2.5.0
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =Color.White
                  Height: =50
                  Icon: =Icon.BackArrow
                  OnSelect: =Back()
                  Width: =50
            - lblTitle_1:
                Control: Label@2.5.1
                Properties:
                  Align: =Align.Center
                  AlignInContainer: =AlignInContainer.Center
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =Color.White
                  Fill: =RGBA(0, 7, 140, 0.01)
                  Font: =Font.'Open Sans'
                  FontWeight: =FontWeight.Bold
                  Height: =52
                  Size: =20
                  Text: ="Scan History"
                  Width: =520
                  Y: =9
            - IcoHome:
                Control: Classic/Icon@2.5.0
                Properties:
                  AlignInContainer: =AlignInContainer.Center
                  BorderColor: =RGBA(0, 18, 107, 1)
                  Color: =Color.White
                  Height: =50
                  Icon: =Icon.Home
                  OnSelect: |-
                    =Reset(cmbStudentSearch);
                    Clear(colGuardians);
                    Reset(radGuardians);
                    Navigate(Home_Screen);
                  Width: =50
      - shpScanHistory:
          Control: Rectangle@2.3.0
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            BorderThickness: =1
            Fill: =RGBA(255, 255, 255, 1)
            Height: =870
            Width: =594
            X: =22
            Y: =114
      - lblHistory:
          Control: Label@2.5.1
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(14, 78, 163, 1)
            Font: =Font.'Open Sans'
            FontWeight: =FontWeight.Bold
            Height: =44
            Size: =16
            Text: ="Scan History — " & varHistoryStudent.cree6_idname
            Width: =595
            X: =23
            Y: =113
      - dtbScanHistory:
          Control: DataTable@1.0.3
          Properties:
            BorderColor: =RGBA(0, 18, 107, 1)
            Font: =Font.'Open Sans'
            HeadingColor: =RGBA(255, 255, 255, 1)
            HeadingFill: =RGBA(56, 96, 178, 1)
            HeadingFont: =Font.'Open Sans'
            HeadingFontWeight: =FontWeight.Semibold
            HeadingSize: =14
            Height: =819
            HoverFill: =RGBA(186, 202, 226, .2)
            Items: |+
              =colScanHistory
            SelectedFill: =RGBA(245, 248, 255, 1)
            Size: =13
            Visible: =!IsBlank(cmbStudentSearch.Selected.IDName)
            Width: =594
            X: =22
            Y: =165
          Children:
            - colCreatedBy:
                Control: DataTableColumn@1.0.1
                Variant: ComplexType
                IsLocked: true
                Properties:
                  AutoWidth: =false
                  FieldDisplayName: ="Scanned By"
                  FieldName: ="createdby"
                  Order: =9
                  Text: |
                    =Left(ThisItem.'Created By'.'Full Name',20) & "…"
                  Width: =146
            - colPickUpPerson:
                Control: DataTableColumn@1.0.1
                Variant: Textual
                IsLocked: true
                Properties:
                  FieldDisplayName: ="Pick Up Guardian"
                  FieldName: ="cree6_pickupperson"
                  Order: =8
                  Text: =Left(ThisItem.PickUpPerson,20) & "…"
                  Width: =175
            - colScanType:
                Control: DataTableColumn@1.0.1
                Variant: Textual
                IsLocked: true
                Properties:
                  AutoWidth: =false
                  FieldDisplayName: ="ScanType"
                  FieldName: ="cree6_scantype"
                  Order: =7
                  Text: =ThisItem.ScanType
                  Width: =113
            - colCreatedOn:
                Control: DataTableColumn@1.0.1
                Variant: DateTime
                IsLocked: true
                Properties:
                  AutoWidth: =false
                  FieldDisplayName: ="Created On"
                  FieldName: ="createdon"
                  Order: =2
                  Text: |
                    =Text(ThisItem.'Created On', DateTimeFormat.ShortDateTime)
                  Width: =178
      - btnRefreshHistory:
          Control: Classic/Button@2.2.0
          Properties:
            BorderColor: =ColorFade(Self.Fill, -15%)
            Color: =RGBA(255, 255, 255, 1)
            DisabledBorderColor: =RGBA(166, 166, 166, 1)
            Fill: =RGBA(56, 96, 178, 1)
            Font: =Font.'Open Sans'
            Height: =46
            HoverBorderColor: =ColorFade(Self.BorderColor, 20%)
            HoverColor: =RGBA(255, 255, 255, 1)
            HoverFill: =ColorFade(RGBA(56, 96, 178, 1), -20%)
            OnSelect: |
              =ClearCollect(
                  colScanHistory,
                  Sort(
                      Filter(
                          Student_Scans,
                          Student_QR = varHistoryStudent.cree6_idname
                      ),
                      'Created On',
                      SortOrder.Descending
                  )
              );
              Set(varLastRefreshed, Now());
              Notify("Scan history refreshed", NotificationType.Success)
            PressedBorderColor: =Self.Fill
            PressedColor: =Self.Fill
            PressedFill: =Self.Color
            RadiusBottomLeft: =8
            RadiusBottomRight: =8
            RadiusTopLeft: =8
            RadiusTopRight: =8
            Size: =16
            Text: ="Refresh Report"
            Width: =208
            X: =216
            Y: =1036
      - lblLastRefreshed:
          Control: Label@2.5.1
          Properties:
            Align: =Align.Center
            BorderColor: =RGBA(0, 18, 107, 1)
            Color: =RGBA(120,120,120,1)
            Font: =Font.'Open Sans'
            Height: =31
            Italic: =true
            Overflow: =Overflow.Scroll
            Size: =13
            Text: |
              ="Last refreshed at: " & Text(varLastRefreshed, "mm/dd/yyyy hh:mm AM/PM")
            Tooltip: =
            Width: =593
            X: =24
            Y: =994
